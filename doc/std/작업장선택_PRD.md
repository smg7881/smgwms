# 제품 요구사항 정의서 (PRD) - 작업장 선택 팝업

## 1. User Flow
사용자가 작업장을 검색하고 선택하여 부모 창(Parent Window)에 정보를 전달하는 흐름입니다.

1.  **팝업 진입**: 사용자가 메인 업무 화면에서 작업장 찾기 버튼을 클릭하여 팝업을 엽니다.
    *   시스템은 로그인한 사용자의 ID와 위탁업체 정보를 기반으로 초기 화면을 구성합니다.
2.  **조건 입력**: 사용자가 검색 조건(법인, 부서, 작업장명, 사용여부 등)을 입력합니다.
    *   부서 선택 시 별도의 '부서선택 팝업'을 통해 부서 코드를 입력할 수 있습니다.
3.  **조회(Search)**: 사용자가 [검색] 버튼을 클릭합니다.
    *   시스템은 입력된 조건과 로그인한 위탁업체 정보를 기준으로 작업장 목록을 조회합니다.
4.  **목록 확인**: 조회된 작업장 목록(코드, 명칭, 부서명, 담당자 등)을 그리드에서 확인합니다.
5.  **작업장 선택**:
    *   사용자가 리스트에서 특정 작업장을 선택(클릭)합니다.
    *   [선택] 버튼을 클릭하거나 더블 클릭 등의 액션을 수행합니다 (문서상 '선택버튼 클릭 시'로 명시됨).
6.  **데이터 반환 및 종료**: 시스템은 선택된 작업장 정보를 부모 창으로 전달하고 팝업을 닫습니다.

---

## 2. UI Component 리스트
화면 레이아웃은 크게 **조회 조건 영역(Search Area)**, **목록 영역(List Area)**, **버튼 영역(Button Area)**으로 구분됩니다.

### 2.1 조회 조건 영역 (Header)
| 라벨명 | 컴포넌트 타입 | 설명 | 비고 |
| :--- | :--- | :--- | :--- |
| **법인** | Input / Search | 법인 정보 표시 및 검색 | ReadOnly 또는 Editable |
| **부서** | Input / Search | 부서 코드 및 명칭 입력 | '찾기' 버튼 클릭 시 부서선택 팝업 호출 |
| **작업장명** | Text Input | 작업장 이름 입력 | 부분 검색 가능 예상 |
| **작업장코드** | Text Input | 작업장 코드 입력 | |
| **사용여부** | Combo Box (Select) | 사용 여부 선택 (Y/N) | 기본값: 'Y' (사용중) |

### 2.2 목록 영역 (Body)
데이터가 출력되는 그리드(Grid) 영역입니다.

| 컬럼명 | 데이터 타입 | 설명 |
| :--- | :--- | :--- |
| **작업장코드** | String | 작업장의 고유 코드 |
| **작업장명** | String | 작업장의 이름 |
| **부서명** | String | 작업장이 소속된 부서명 |
| **담당자명** | String | 작업장 담당자 이름 |
| **담당자전화번호** | String | 담당자의 연락처 |

### 2.3 버튼 영역 (Footer/Action)
| 버튼명 | 액션 | 설명 |
| :--- | :--- | :--- |
| **검색** | Click | 입력된 조건으로 작업장 목록 조회 |
| **닫기** | Click | 팝업 닫기 |
| **선택** | Click | 선택된 행의 데이터를 반환하고 창 닫기 |

---

## 3. Data Mapping
화면의 UI 항목과 내부 데이터 속성(ID)의 매핑 정보입니다.

### 3.1 조회 조건 (Input Data)
| 항목명(Kor) | 항목명(Eng) | 속성 ID | 필수 여부 | 매핑 설명 |
| :--- | :--- | :--- | :--- | :--- |
| 법인 | Corporation | `corp` | Optional | 로그인 정보 기반 자동 설정 가능 |
| 부서 | Department | `dept` | Optional | 부서 코드 |
| 부서명 | DepartmentName | `deptNm` | Optional | 부서 명칭 |
| 작업장명 | WorkplaceName | `workPlNm` | Optional | 검색할 작업장 명칭 |
| 작업장코드 | WorkplaceCode | `workPlCd` | Optional | 검색할 작업장 코드 |
| 사용여부 | UseYesOrNo | `useYn` | **Mandatory** | 'Y' 또는 'N' (기본값 Y) |

### 3.2 결과 목록 (Output Data List)
| 항목명(Kor) | 항목명(Eng) | 속성 ID | 매핑 설명 |
| :--- | :--- | :--- | :--- |
| 작업장코드 | WorkplaceCode | `workPlCd` | 결과 그리드 출력 및 반환 데이터 |
| 작업장명 | WorkplaceName | `workPlNm` | 결과 그리드 출력 및 반환 데이터 |
| 부서명 | DepartmentName | `deptNm` | 결과 그리드 출력 및 반환 데이터 |
| 담당자명 | OfficerName | `ofcrNm` | 결과 그리드 출력 및 반환 데이터 |
| 담당자전화번호 | OfficerTelephoneNumber | `ofcrTelNo` | 결과 그리드 출력 및 반환 데이터 |

---

## 4. Logic Definition
화면 동작 및 데이터 처리에 대한 상세 로직입니다.

### 4.1 초기화 로직 (Initialization)
*   **로그인 정보 연동**: 팝업 오픈 시 로그인한 사용자의 ID(LoginId)를 입력받아 초기화합니다.
*   **사용여부 기본값**: '사용여부' 콤보박스는 항상 **'Y' (사용 중)**인 건만 조회하도록 기본 설정합니다. 단, 사용자가 전체 조회를 원할 경우 수정하여 조회할 수 있어야 합니다.

### 4.2 업무 규칙 (Business Rules)
*   **데이터 접근 제어**:
    *   **작업장 조회**: 로그인한 위탁업체에서 등록한 작업장만 조회되어야 합니다.
    *   **부서 조회**: 조회 조건의 부서 찾기 시, 로그인한 위탁업체에서 등록한 부서만 조회되어야 합니다.

### 4.3 이벤트 로직 (Event Logic)
1.  **부서 선택 이벤트 (`Open`)**:
    *   조건: 부서 찾기 버튼 클릭.
    *   액션: `부서관리.부서선택` 화면을 호출(Call Event)합니다.
    *   입력값: 법인코드(공통 테이블 참조).
    *   출력값: 선택된 `부서코드`, `부서명`을 받아 화면에 표시합니다.
2.  **작업장 목록 조회 (`RetrieveWorkPlListCmd`)**:
    *   조건: [검색] 버튼 클릭 (`Click Trigger`).
    *   액션: 위탁업체 관리 작업장 중 입력된 `Search Criteria`(`corp`, `dept`, `workPlNm`, `useYn` 등)에 일치하는 데이터를 조회합니다.
    *   출력: 그리드에 목록 바인딩.
3.  **작업장 선택 및 반환 (`Select`)**:
    *   조건: 그리드 내 항목 선택 후 [선택] 버튼 클릭 (또는 행 클릭).
    *   액션: 선택된 작업장의 상세 정보(`작업장코드`, `작업장명`, `부서코드`, `부서명`, `담당자명`, `담당자전화번호`)를 부모 창(Parent Window)으로 전달(Return)하고 현재 팝업을 닫습니다.
