# PRD: 사용자 즐겨찾기 관리 시스템

## 1. User Flow
사용자가 시스템에 로그인하여 자신의 즐겨찾기 메뉴를 조회, 추가, 수정, 삭제하고 그룹을 관리하는 전체 흐름입니다.

### 1.1 메인 화면 (사용자즐겨찾기관리)
1. **화면 진입:** 사용자가 화면에 진입하면 시스템은 로그인 정보(ID, 이름, 법인)와 현재 날짜를 로드하고, 좌측에 전체 메뉴 트리(Tree)를 구성합니다.
2. **조회:**
    *   사용자명 등 조회 조건을 입력합니다.
    *   `조회` 버튼을 클릭하면 우측 목록에 현재 등록된 즐겨찾기 리스트가 표시됩니다.
3. **즐겨찾기 추가:**
    *   좌측 **메뉴 Tree**에서 원하는 메뉴를 찾습니다.
    *   마우스 오른쪽 버튼을 클릭하여 '추가'를 요청하면 우측 즐겨찾기 목록에 해당 메뉴가 추가됩니다.
4. **목록 편집:**
    *   추가된 항목의 **정렬순서**, **사용여부** 등을 수정합니다.
    *   필요 시 **즐겨찾기 그룹**을 지정하기 위해 돋보기 아이콘(검색)을 클릭하여 팝업을 호출합니다.
5. **삭제:**
    *   목록에서 항목을 선택하고 `삭제` 버튼을 클릭합니다. (신규 작성 중인 행은 즉시 삭제, 기등록 데이터는 '사용안함' 처리).
6. **저장:**
    *   `저장` 버튼을 클릭하여 변경된 사항(신규, 수정, 삭제 상태)을 DB에 반영합니다.

### 1.2 팝업 화면 (사용자즐겨찾기그룹선택)
1. **팝업 진입:** 메인 화면에서 그룹 찾기 시 호출됩니다. 로그인한 사용자가 등록한 즐겨찾기 그룹 목록만 조회됩니다.
2. **그룹 관리:**
    *   **조회:** 기존 등록된 그룹명을 확인합니다.
    *   **추가/삭제:** 행 추가를 통해 새로운 그룹명을 입력하거나, 선택된 그룹을 삭제합니다.
    *   **저장:** 그룹 목록의 변경 사항을 저장합니다.
3. **선택 및 복귀:**
    *   목록에서 그룹을 선택하고 `선택` 버튼을 클릭하면, 그룹명이 메인 화면으로 전달되고 팝업이 닫힙니다.

---

## 2. UI Component 리스트
화면을 구성하는 주요 UI 요소와 속성입니다.

### 2.1 메인 화면: 사용자즐겨찾기관리 (P3-1)

| 영역 | 컴포넌트 명 | 타입 | 설명/속성 | 비고 |
| :--- | :--- | :--- | :--- | :--- |
| **Header** | Title | Text | "사용자즐겨찾기관리" | |
| **Search** | 사용자 (User) | InputBox | 사용자명 검색 조건 | Editable |
| | 조회 버튼 | Button | 즐겨찾기 목록 조회 트리거 | |
| **Left** | 메뉴 Tree | TreeView | 전체 시스템 메뉴 구조 표시 | 우클릭 이벤트 지원 |
| **Right** | **사용자즐겨찾기목록** | Grid/Table | 즐겨찾기 상세 리스트 | |
| (Grid Col) | 선택 (Select) | CheckBox | 행 선택 | |
| (Grid Col) | 메뉴 (Menu) | Text | 메뉴명 | Mandatory |
| (Grid Col) | 사용자즐겨찾기메뉴그룹 | Input/Search | 그룹명 지정 | Mandatory, 팝업호출 |
| (Grid Col) | 정렬순서 (SortSequence) | InputBox | 메뉴 표시 순서 | Mandatory |
| (Grid Col) | 사용여부 (UseYesOrNo) | ComboBox | 예(Y) / 아니오(N) | Mandatory, Default: Y |
| **Action** | 저장 | Button | 변경사항 DB 저장 | |
| | 삭제 | Button | 행 삭제 또는 사용여부 변경 | |

### 2.2 팝업 화면: 사용자즐겨찾기그룹선택 (P2)

| 영역 | 컴포넌트 명 | 타입 | 설명/속성 | 비고 |
| :--- | :--- | :--- | :--- | :--- |
| **Header** | Title | Text | "사용자즐겨찾기그룹선택" | |
| **List** | **사용자즐겨찾기그룹목록** | Grid/Table | 그룹 목록 표시 | |
| (Grid Col) | 선택 (Select) | CheckBox | 행 선택 | |
| (Grid Col) | 사용자즐겨찾기그룹명 | InputBox | 그룹명 입력/수정 | |
| **Action** | 선택 | Button | 부모창 값 전달 및 닫기 | |
| | 저장 | Button | 그룹 정보 저장 | |
| | 삭제 | Button | 그룹 행 삭제 | |
| | 추가 | Button | 신규 그룹 행 추가 | |

---

## 3. Data Mapping
각 UI 항목이 실제 데이터 모델(영문 속성명)과 어떻게 매핑되는지에 대한 정의입니다.

### 3.1 사용자 즐겨찾기 목록 (User Favorites List)
| 한글 항목명 | 영문 항목명 | 영문 속성명 (Variable) | 타입 | 필수 여부 |
| :--- | :--- | :--- | :--- | :--- |
| 사용자 | User | `user` | String | - |
| 선택 | Select | `slc` | Boolean | - |
| 메뉴 | Menu | `menu` | String | **M (Mandatory)** |
| 사용자즐겨찾메뉴그룹 | User Favorites Menu Group | `userFavorMenuGrp` | String | **M (Mandatory)** |
| 정렬순서 | Sort Sequence | `sortSeq` | Number/String | **M (Mandatory)** |
| 사용여부 | Use Yes Or No | `useYn` | Char (Y/N) | **M (Mandatory)** |

### 3.2 사용자 즐겨찾기 그룹 목록 (User Favorites Group List - Popup)
| 한글 항목명 | 영문 항목명 | 영문 속성명 (Variable) | 타입 | 필수 여부 |
| :--- | :--- | :--- | :--- | :--- |
| 선택 | Select | `slc` | Boolean | - |
| 사용자즐겨찾기그룹명 | User Favorite Group Name | `userFavorGrpNm` | String | - |

---

## 4. Logic Definition
화면 동작 및 데이터 처리에 대한 상세 로직입니다.

### 4.1 초기화 및 조회 로직 (Open & Search)
*   **Open Event:**
    *   로그인 ID, 사용자명, DB의 시스템 날짜(`sysdate`)를 가져와 화면 기본값으로 설정합니다.
    *   `사용여부` 콤보박스(Yes/No)를 초기화합니다.
    *   전체 메뉴 정보를 로드하여 좌측 `메뉴 Tree`를 구성합니다.
*   **Search Event (사용자즐겨찾기목록검색):**
    *   입력된 `사용자즐겨찾기관리검색조건(로그인Id)`을 Input으로 하여 시스템에 저장된 즐겨찾기 정보를 조회합니다.
    *   **업무 규칙:** 로그인한 사용자의 소속 법인이 디폴트로 적용되어야 합니다.

### 4.2 데이터 조작 로직 (CUD)
*   **행 추가 (Menu Add):**
    *   좌측 `메뉴 Tree`에서 마우스 오른쪽 버튼 클릭 이벤트를 트리거로 하여, 선택된 메뉴 정보를 우측 즐겨찾기 목록 그리드에 추가합니다.
*   **저장 (Save):**
    *   **신규 등록 시:** 등록자명/일시, 수정자명/일시에 `현재 로그인ID`와 `시스템 일시`를 저장합니다.
    *   **수정 시:** 수정자명/일시에 `현재 로그인ID`와 `시스템 일시`를 업데이트합니다.
*   **삭제 (Delete):**
    *   **입력 중인 데이터:** 그리드에서 행 자체를 물리적으로 삭제합니다.
    *   **기 등록된 데이터:** DB에서 삭제하지 않고 `사용여부(useYn)` 값을 **'아니오(N)'**로 업데이트하여 저장합니다 (Soft Delete).

### 4.3 팝업 로직 (Popup Logic)
*   **그룹 조회 규칙:**
    *   반드시 **등록한(로그인한) 사용자**가 생성한 즐겨찾기 그룹만 조회되어야 합니다.
*   **선택 (Select):**
    *   목록에서 그룹을 선택하고 버튼 클릭 시, 선택된 `사용자즐겨찾기그룹명`을 부모 창(메인 화면)의 해당 필드로 전달하고 팝업을 닫습니다.
*   **그룹 저장/삭제:**
    *   메인 화면과는 별도로 팝업 내에서 그룹의 생성(추가) 및 삭제, DB 저장이 독립적으로 수행됩니다.
