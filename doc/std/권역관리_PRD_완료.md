# 권역관리(Region Management) PRD

## 1. User Flow

사용자의 업무 진행 순서에 따른 화면 상호작용 흐름입니다.

1.  **화면 진입 (Open)**
    *   사용자가 권역관리 화면에 접속합니다.
    *   로그인한 사용자의 정보(ID, 소속 법인)와 현재 시스템 날짜가 기본 설정됩니다.
    *   기본 조회 조건이 세팅됩니다(권역명: "전체", 사용여부: "Yes").
2.  **권역 검색 (Search)**
    *   사용자가 법인, 권역명, 사용여부 등의 검색 조건을 입력/선택합니다.
    *   [검색] 버튼을 클릭하면 조건에 맞는 권역 목록이 좌측 리스트 영역에 출력됩니다.
3.  **권역 상세 조회 (Select)**
    *   좌측 권역 목록에서 특정 권역을 클릭합니다.
    *   우측 상세 정보 영역에 해당 권역의 상세 데이터(영문명, 상위권역, 비고 등)가 표시됩니다.
4.  **신규 권역 등록 (New)**
    *   [신규] 버튼을 클릭합니다.
    *   우측 상세 정보 입력 필드가 초기화됩니다(단, 등록자/수정자는 현재 사용자, 사용여부는 '예', 법인은 소속 법인으로 자동 세팅).
    *   사용자가 필수 항목(권역명, 영문명 등)을 입력합니다.
    *   [저장] 버튼을 클릭하여 데이터를 생성합니다.
5.  **권역 정보 수정 (Update)**
    *   목록에서 권역 선택 후 상세 정보를 수정합니다.
    *   수정 시 수정자명과 수정일시는 현재 사용자와 시스템 일시로 자동 갱신됩니다.
    *   [저장] 버튼을 클릭하여 변경 사항을 반영합니다.

---

## 2. UI Component 리스트

화면을 구성하는 주요 UI 요소 및 속성 정의입니다.

### 2.1 검색 영역 (Top Search Bar)
| UI 요소 | 타입 | 설명/기본값 | 필수여부 |
| :--- | :--- | :--- | :--- |
| **법인코드/명** | Input + Popup | 법인코드 및 법인명 입력. 돋보기 아이콘 클릭 시 '법인선택 팝업' 호출 | Mandatory |
| **권역명** | Text Input | 검색할 권역명 입력 (Default: "전체") | Optional |
| **사용여부** | Select Box | 사용 여부 선택 (Default: --선택-- 또는 Yes) | Optional |
| **검색 버튼** | Button | 조회 이벤트 트리거 | - |

### 2.2 권역 목록 영역 (Bottom-Left List)
| 컬럼명 | 타입 | 설명 |
| :--- | :--- | :--- |
| **권역코드** | Text (Read-only) | 10자리 권역 코드 |
| **권역명** | Text (Read-only) | 권역의 한글 명칭 |
| **상위권역코드** | Text (Read-only) | 상위 권역의 코드 |

### 2.3 권역 상세 정보 영역 (Bottom-Right Detail)
| UI 요소 | 타입 | 설명 | 필수여부 (M) |
| :--- | :--- | :--- | :--- |
| **법인코드** | Text (Editable) | 소속 법인 코드 및 명칭 | M |
| **권역코드** | Text (Editable) | 신규 시 자동채번, 수정 시 Read-only | M |
| **권역명** | Text (Editable) | 권역 한글 명칭 | M |
| **권역영문명** | Text (Editable) | 권역 영문 명칭 | M |
| **상위권역코드** | Input + Popup | 상위 권역 지정. 돋보기 아이콘 클릭 시 '권역선택 팝업' 호출 | Optional |
| **비고** | Text (Editable) | 기타 비고 사항 | Optional |
| **사용여부** | Select Box | 사용 유무 (Yes/No) | M |
| **등록자/일시** | Text (Read-only) | 최초 등록자 정보 (시스템 자동) | M |
| **수정자/일시** | Text (Read-only) | 최종 수정자 정보 (시스템 자동) | M |
| **신규 버튼** | Button | 입력 폼 초기화 이벤트 트리거 | - |
| **저장 버튼** | Button | DB 저장(Insert/Update) 이벤트 트리거 | - |

---

## 3. Data Mapping

UI 항목과 백엔드/DB 속성 간의 매핑 정보입니다.

### 3.1 Search Condition
*   **corpCd**: 법인코드
*   **corpNm**: 법인명
*   **regnNm**: 권역명
*   **useYn**: 사용여부

### 3.2 List Data Grid
*   **regnCd**: 권역코드
*   **regnNm**: 권역명
*   **upperRegnCd**: 상위권역코드

### 3.3 Detail Information Form
*   **corpCd**: 법인코드
*   **regnCd**: 권역코드 (10자리, 자동채번)
*   **regnNmCd**: 권역명 (설계서상 영문 속성명이 `regnNmCd`로 표기됨에 유의)
*   **regnEngNmCd**: 권역영문명
*   **upperRegnCd**: 상위권역코드
*   **rmkCd**: 비고
*   **useYnCd**: 사용여부
*   **regrNmCd**: 등록자명
*   **regDate**: 등록일시
*   **mdfrNmCd**: 수정자명
*   **chgdt**: 수정일시

---

## 4. Logic Definition

화면의 주요 기능 및 비즈니스 로직에 대한 정의입니다.

### 4.1 초기화 및 화면 제어 (Open & Display)
*   **기본값 설정**: 화면 오픈 시 로그인 ID, 소속 법인코드, DB Sysdate(현재시간)를 가져와 기본값으로 설정합니다.
*   **초기 조회 조건**: 권역명 검색 조건의 기본값은 "전체"로 설정합니다.
*   **사용여부**: 기본값은 "Yes(예)"로 설정합니다.

### 4.2 조회 로직 (Search)
*   입력된 검색 조건(법인, 권역명, 사용여부)에 해당하는 권역 목록을 조회하여 그리드에 표시합니다.
*   목록의 Row를 클릭하면 해당 `regnCd`를 키(Key)로 상세 정보를 재조회하여 우측 상세 폼에 바인딩합니다.

### 4.3 신규 등록 로직 (New)
*   상세 정보의 입력 필드(법인, 권역코드, 권역명 등)를 모두 Clear(초기화) 합니다.
*   단, **등록자/수정자 정보**는 현재 로그인한 사용자 ID로, **등록/수정일시**는 현재 시스템 시간으로 세팅합니다.
*   **법인코드**는 현재 사용자의 소속 법인으로 자동 포함되며, **사용여부**는 'Yes'로 기본 설정됩니다.

### 4.4 저장 로직 (Save)
*   **필수값 체크**: 법인코드, 권역코드, 권역명, 권역영문명, 사용여부 등 필수(Mandatory) 항목 입력을 확인합니다.
*   **권역코드 생성 규칙**: 신규 등록 시 무의미한 **10자리 코드**를 사용하며, 자동 채번 로직에 의해 신규 코드를 생성합니다.
*   **Transaction**:
    *   신규 등록: `Insert` 쿼리 실행 (등록자/일시, 수정자/일시 모두 현재 기준 저장).
    *   수정: `Update` 쿼리 실행 (수정자/일시만 현재 기준 갱신).

### 4.5 팝업 연동 로직 (Popup)
*   **법인선택**: 검색 조건 또는 상세 정보의 돋보기 클릭 시 호출. 조회 결과가 1건일 경우 팝업 없이 바로 세팅하고, 다건일 경우 팝업을 띄웁니다.
*   **권역선택(상위권역)**: 상위권역코드 입력 시 호출. 조회 결과가 1건일 경우 바로 세팅, 아니면 선택 팝업을 띄웁니다.
