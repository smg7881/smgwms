# 제품 요구사항 정의서 (PRD): 기본작업단계선택 팝업

## 1. 개요
본 문서는 Logis-T 프로젝트의 일환으로, 메인 화면에서 필요한 기본작업단계 정보를 검색하고 조회하기 위한 팝업 화면의 요구사항을 정의합니다.

## 2. User Flow (사용자 흐름)

사용자가 메인 화면에서 '기본작업단계' 선택을 요청할 때 발생하는 흐름입니다.

1.  **팝업 진입 (Entry)**
    *   사용자가 메인 화면에서 기본작업단계 검색 버튼을 클릭하거나 특정 트리거를 실행합니다.
    *   시스템은 메인 화면으로부터 전달받은 인자값(기본작업단계, 화종, 레벨1, 레벨2)이 있는지 확인합니다.

2.  **초기화 및 자동 조회 (Initialization & Auto-Search)**
    *   **인자값이 있는 경우:** 팝업 오픈 시 전달받은 인자(코드 등)를 검색 조건 영역에 자동으로 세팅하고, 해당 조건에 맞는 데이터를 즉시 조회하여 리스트에 표시합니다. 공통 모듈을 호출하여 각 코드에 해당하는 명칭(화종명, 레벨1명 등)을 변환하여 표시합니다.
    *   **인자값이 없는 경우:** 빈 검색 조건으로 팝업이 열립니다.

3.  **검색 수행 (Search)**
    *   사용자는 '기본작업단계코드' 또는 '기본작업단계명'을 입력/수정합니다.
    *   '검색' 버튼(Trigger: Click)을 누르면 입력된 조건에 맞는 작업단계 리스트가 그리드에 조회됩니다.

4.  **결과 확인 및 종료 (View & Exit)**
    *   사용자는 조회된 리스트(기준작업단계코드, 명, 레벨 정보 등)를 확인합니다.
    *   '닫기' 버튼을 클릭하여 팝업을 종료합니다.

---

## 3. UI Component 리스트

화면은 크게 **검색 조건 영역(Search Area)**과 **결과 리스트 영역(List Area)**, 그리고 **Action 버튼**으로 구성됩니다.

### 3.1 검색 조건 영역 (Criteria)
| 항목명 (Kor) | 항목명 (Eng) | 속성 ID (Variable) | UI 타입 | 속성 | 비고 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 기본작업단계코드 | BasisWorkStepCode | `basisWorkStepCd` | Input Text | Editable (E) | 검색 키워드 |
| 기본작업단계명 | BasisWorkStepName | `basisWorkStepNm` | Input Text | Editable (E) | 검색 키워드 |

### 3.2 결과 리스트 영역 (Grid List)
| 항목명 (Kor) | 항목명 (Eng) | 속성 ID (Variable) | UI 타입 | 속성 | 비고 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 기준작업단계코드 | StandardWorkStepCode | `stdWorkStepCd` | Text | ReadOnly (R) | |
| 기준작업단계명 | StandardWorkStepName | `stdWorkStepNm` | Text | ReadOnly (R) | |
| 레벨 1코드 | Level1Code | `lvl1Cd` | Text | ReadOnly (R) | |
| 레벨 1명 | Level1Name | `lvl1Nm` | Text | ReadOnly (R) | |
| 레벨 2코드 | Level2Code | `lvl2Cd` | Text | ReadOnly (R) | |
| 레벨 2명 | Level2Name | `lvl2Nm` | Text | ReadOnly (R) | |
| 기본작업단계명 | - | - | Text | ReadOnly (R) | |

### 3.3 버튼 (Buttons)
| 버튼명 | 트리거 | 기능 설명 |
| :--- | :--- | :--- |
| 검색 (아이콘/버튼) | Click | `기본작업단계조회` 이벤트 실행 |
| 닫기 | Click | 팝업 닫기 |

---

## 4. Data Mapping

UI 컴포넌트와 데이터베이스/내부 변수 간의 매핑 정보입니다.

### 4.1 Input Parameters (From Main Screen)
팝업 오픈 시 부모 창에서 전달받는 데이터입니다.
*   `기본작업단계` (코드)
*   `화종` (Cargo Type)
*   `레벨 1` (Level 1 Info)
*   `레벨 2` (Level 2 Info)

### 4.2 Output Parameters (To Main Screen)
선택 또는 조회된 결과를 부모 창으로 반환하거나 활용하는 데이터입니다.
*   `기준작업단계` (리스트)
*   `기준작업단계명`
*   `화종`, `화종명`
*   `레벨 1`, `레벨 1명`
*   `레벨 2`, `레벨 2명` 

### 4.3 Internal Data Structures
*   **기본작업단계정보 리스트:** 조회 결과인 Grid에 바인딩되는 데이터셋.

---

## 5. Logic Definition

화면의 주요 기능에 대한 로직 상세입니다.

### 5.1 초기화 로직 (Open Event)
*   **파라미터 바인딩:** 메인 화면에서 넘어온 인자가 있을 경우, 로컬 변수에 세팅합니다.
    *   `기준작업단계코드` ← 인자 값
    *   `화종` ← 인자 값
    *   `레벨1`, `레벨2` ← 인자 값
*   **명칭 변환 (공통 모듈 호출):**
    *   `기준작업단계코드`를 이용하여 `기준작업단계명`을 표시합니다.
    *   `화종` 코드를 이용하여 공통모듈 호출 → `화종명` 획득 및 표시.
    *   `레벨1` 코드를 이용하여 공통모듈 호출 → `레벨1명` 획득 및 표시.
    *   `레벨2` 코드를 이용하여 공통모듈 호출 → `레벨2명` (문서상 레벨1명으로 오기되어 있으나 문맥상 레벨2명임) 획득 및 표시.
*   **자동 조회:** 인자가 전달된 경우, 해당 조건을 바탕으로 `기본작업단계조회` 로직을 즉시 수행하여 화면을 구성합니다.

### 5.2 조회 로직 (Retrieve/Search)
*   **이벤트 명:** `기본작업단계조회` (RetrieveBasisWorkRouteCmd).
*   **입력 값:** 검색 조건 영역의 `기본작업단계코드`, `기본작업단계명`.
*   **처리:**
    1.  사용자가 입력한 검색 조건을 쿼리 파라미터로 구성합니다.
    2.  서버의 기본작업단계 정보 조회 API를 호출합니다.
    3.  사용 여부가 '사용(Used)'인 데이터만 필터링하거나 기본값으로 처리합니다.
*   **출력:** 조회된 리스트를 Grid 영역에 바인딩하여 Display 합니다.

### 5.3 업무 규칙 (Business Rules)
*   **사용 여부:** 기본적으로 조회되는 데이터의 사용 여부 기본값은 '사용' 상태여야 합니다.
*   **데이터 흐름:** 메인 화면과 팝업 간의 데이터 인자(In/Out) 구조를 준수해야 합니다.
