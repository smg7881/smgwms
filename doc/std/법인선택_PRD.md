# 제품 요구사항 정의서 (PRD) - 법인선택 팝업

## 1. User Flow
사용자가 법인을 검색하고 선택하여 부모 화면으로 데이터를 전달하는 흐름은 다음과 같습니다.

1.  **팝업 진입**: 사용자가 부모 창에서 법인 선택 기능을 호출하면 팝업이 오픈됩니다. 이때 시스템은 로그인 ID를 파라미터로 전달받습니다.
2.  **조회 조건 입력**:
    *   사용자는 '법인코드', '법인명'을 입력하거나, '사용여부(Y/N)'를 선택합니다.
    *   기본적으로 '사용여부'는 'Y'(사용 중)로 설정되어 있습니다.
3.  **검색 실행**: '검색' 버튼을 클릭합니다.
4.  **목록 확인**: 하단 그리드(List) 영역에 조회 조건에 해당하는 법인 목록(법인코드, 법인명, 국가, 사업자등록번호)이 출력됩니다.
5.  **법인 선택**:
    *   사용자가 목록에서 특정 법인 행(Row)을 클릭합니다.
    *   (또는 선택 후 선택 버튼 클릭 - *문서상 흐름에는 '선택버튼 클릭'이 언급되나 UI에는 '검색/닫기'만 존재하므로 그리드 클릭 또는 더블클릭 액션으로 간주됨*).
6.  **데이터 전달 및 종료**: 선택된 법인 정보가 부모 창으로 전달되며 팝업이 자동으로 닫힙니다.

---

## 2. UI Component 리스트
화면 레이아웃은 크게 조회 조건 영역(Search Area)과 목록 영역(List Area), 그리고 하단 버튼 영역으로 구성됩니다.

### 2.1 조회 조건 영역 (Search Condition)
| Label (Kor) | UI Type | Field Name (Eng) | 설명 및 속성 |
| :--- | :--- | :--- | :--- |
| **법인코드** | Input Box | `corpCd` | 법인 코드를 입력하여 검색 (Editable) |
| **법인명** | Input Box | `corpNm` | 법인 명칭을 입력하여 검색 (Editable) |
| **사용여부** | ComboBox | `useYn` | 사용 여부 선택 (Y/N). **Default: Y** (Editable, Choice) |
| **검색** | Button | - | 법인 목록 조회 트리거 |

### 2.2 목록 영역 (Grid List)
| Header (Kor) | Field Name (Eng) | 설명 및 속성 |
| :--- | :--- | :--- |
| **법인코드** | `corpCd` | 법인 식별 코드 (Editable*) |
| **법인명** | `corpNm` | 법인 명칭 (Editable*) |
| **국가** | `ctry` | 법인 소속 국가 (Editable*) |
| **사업자등록번호** | `bizNo` | 사업자 등록 번호 (Editable*) |

*\*주: 화면설계서상 속성이 Editable(E)로 표기되어 있으나, 그리드 내 출력 항목이므로 실제로는 ReadOnly 성격일 가능성이 높음. 문서 표기를 따름.*

### 2.3 하단 영역 (Footer)
| Label (Kor) | UI Type | 설명 |
| :--- | :--- | :--- |
| **닫기** | Button | 팝업을 닫음 (데이터 전달 없음) |

---

## 3. Data Mapping
화면 간 데이터 이동 및 내부 처리 데이터 정의입니다.

### 3.1 Input Data (Open Parameter)
부모 창에서 팝업을 열 때 전달받는 데이터입니다.
*   **로그인 ID** (`Login Id`): 사용자 식별을 위한 입력값.

### 3.2 Internal Logic Data (Search Query)
DB 조회 시 사용되는 쿼리 파라미터입니다.
*   **법인코드**: 입력된 법인코드
*   **법인명**: 입력된 법인명
*   **사용여부**: 선택된 값 (Y 또는 N)

### 3.3 Output Data (Return Value)
법인 선택 시 부모 창으로 반환되는 데이터입니다. 화면 그리드에는 '국가', '사업자번호'가 보이지만, 실제 반환 데이터(Out)는 아래와 같이 정의되어 있습니다.
*   **법인번호** (법인코드)
*   **법인명**
*   **화주법인번호**
*   **화주명**

---

## 4. Logic Definition
화면 동작에 대한 구체적인 업무 규칙 및 로직 정의입니다.

### 4.1 초기화 로직 (Initialize)
*   **사용여부 기본값 설정**: 팝업 오픈 시 '사용여부' 콤보박스는 'Y'(사용 중인 건만 조회)로 기본 설정되어야 합니다.
*   **초기 조회**: (문서상 명시되지 않았으나 일반적인 패턴으로) 사용자가 검색 버튼을 누르기 전에는 목록이 비어 있거나, 기본 조건으로 자동 조회될 수 있습니다. 설계서상 "사용여부는 항상 사용중인 건 만을 조회하게 설정"이라는 문구가 초기 상태를 암시합니다.

### 4.2 조회 로직 (Search)
*   **이벤트 트리거**: '검색' 버튼 클릭 시 발생.
*   **데이터 필터링**:
    *   입력된 법인코드, 법인명, 사용여부를 조건으로 위탁업체에서 관리하는 법인 목록을 조회합니다.
    *   **업무 규칙**: 등록된 법인만 조회되어야 합니다.
    *   사용여부 'Y' 선택 시 현재 사용 중인 법인만 조회하며, 필요시 'N' 등을 선택하여 전체 조회가 가능해야 합니다.

### 4.3 선택 및 반환 로직 (Select & Return)
*   **이벤트 트리거**: 그리드 내 특정 법인 항목 클릭 (Click).
*   **동작 수행**:
    1.  선택된 행(Row)의 법인정보(법인번호, 법인명, 화주법인번호, 화주명)를 추출합니다.
    2.  추출한 데이터를 부모 창(Opener)으로 전달합니다.
    3.  데이터 전달 후 팝업 창을 즉시 닫습니다.

### 4.4 닫기 로직 (Close)
*   **이벤트 트리거**: '닫기' 버튼 클릭.
*   **동작 수행**: 데이터 전달 없이 팝업 창을 닫습니다.
