# 권역별 우편번호 관리 (Region-specific Zip Code Management) PRD

## 1. User Flow
사용자는 시스템에 로그인한 후, 특정 권역에 할당된 우편번호를 조회하거나, 할당되지 않은 우편번호를 검색하여 권역에 추가/삭제하는 작업을 수행합니다.

1.  **화면 진입 (Open):**
    *   사용자가 화면에 접속하면 시스템은 로그인 ID를 기반으로 접근 권한이 있는 위탁업체(법인) 정보를 자동으로 로드하여 화면에 표시합니다.
2.  **권역 선택:**
    *   사용자는 상단 조회 조건의 '권역' 검색 팝업을 통해 관리할 권역을 선택합니다.
3.  **권역별 우편번호 조회 (상단):**
    *   권역 선택 후 [검색] 버튼을 클릭하여 해당 권역에 이미 매핑되어 있는 우편번호 목록을 상단 그리드에 조회합니다.
4.  **미할당 우편번호 조회 (하단):**
    *   권역에 추가할 우편번호를 찾기 위해 하단 조회 조건(국가, 우편번호 등)을 입력하고 하단 [검색] 버튼을 클릭합니다.
    *   하단 그리드에는 권역별로 매핑되지 않은 우편번호 목록이 출력됩니다.
5.  **매핑 관리 (이동):**
    *   **할당 (위로 이동):** 하단 그리드에서 우편번호를 선택하고 [▲ 위로 이동] 버튼을 클릭하여 상단 그리드로 이동시킵니다(권역 매핑).
    *   **해제 (아래로 이동):** 상단 그리드에서 우편번호를 선택하고 [▼ 아래로 이동] 버튼을 클릭하여 하단 그리드로 이동시킵니다(매핑 삭제).
6.  **저장:**
    *   작업 완료 후 우측 하단의 [저장] 버튼을 클릭하여 변경된 권역별 우편번호 목록 정보를 데이터베이스(DB)에 반영합니다.

## 2. UI Component 리스트

### 2.1 상단 조회 영역 (권한별 메뉴 조회조건)
| 컴포넌트명 | 타입 | 설명 | 필수여부 |
| :--- | :--- | :--- | :--- |
| **법인 (Corp)** | Input+Button | 법인코드 및 법인명 (로그인 정보 기반 자동 로드 또는 검색) | Mandatory |
| **권역 (Region)** | Input+Button | 권역코드 및 권역명 (팝업 호출하여 선택) | Mandatory |
| **검색 버튼** | Button | 선택된 권역의 우편번호 목록 조회 실행 | - |

### 2.2 상단 목록 영역 (권역별 우편번호 목록)
*   **유형:** Data Grid (Multi-row selection 지원)
*   **구성:** 체크박스(선택), 순서, 국가, 우편번호, 일련번호, 우편주소, 시도, 시군구, 읍면동.

### 2.3 중앙 컨트롤 영역
| 컴포넌트명 | 타입 | 설명 |
| :--- | :--- | :--- |
| **위로 이동 (▲)** | Button | 하단 목록의 항목을 상단 목록으로 이동 (권역 매핑) |
| **아래로 이동 (▼)** | Button | 상단 목록의 항목을 하단 목록으로 이동 (매핑 해제) |

### 2.4 하단 조회 영역 (우편번호 조회조건)
| 컴포넌트명 | 타입 | 설명 | 필수여부 |
| :--- | :--- | :--- | :--- |
| **국가 (Country)** | Input+Button | 국가코드 및 국가명 (팝업 호출) | Mandatory |
| **우편번호 (ZipCode)** | Input | 검색할 우편번호 입력 | Optional |
| **우편주소 (Address)** | Input | 검색할 주소 입력 | Optional |
| **검색 버튼** | Button | 조건에 맞는 미할당 우편번호 목록 조회 | - |

### 2.5 하단 목록 영역 (우편번호 목록)
*   **유형:** Data Grid (Multi-row selection 지원)
*   **구성:** 체크박스(선택), 국가, 우편번호, 일련번호, 우편주소, 시도, 시군구, 읍면동.
*   **특이사항:** 상단 그리드와 컬럼 구조는 유사하나 '순서' 컬럼 유무에 차이가 있을 수 있음.

### 2.6 공통 액션 영역
| 컴포넌트명 | 타입 | 설명 |
| :--- | :--- | :--- |
| **저장 버튼** | Button | 변경된 매핑 정보를 DB에 저장 |

## 3. Data Mapping

### 3.1 조회 조건 (Search Parameters)
| UI Field (Kor) | UI Field (Eng) | DB Column / Parameter | Type | 비고 |
| :--- | :--- | :--- | :--- | :--- |
| 법인 | Corporation | `corpCd` | String | 화면 Open시 자동 설정 |
| 법인명 | Corp Name | `corpNm` | String | |
| 권역 | Region | `regnCd` | String | 필수 입력 |
| 권역명 | Region Name | `regnNm` | String | |
| 국가 | Country | `ctryCd` | String | 하단 검색 필수 |
| 국가명 | Country Name | `ctryNm` | String | |
| 우편번호 | ZipCode | `zipcd` | String | |
| 우편주소 | Zip Address | `zipcdAddrCd` | String | |

### 3.2 목록 데이터 (Grid Data)
상단(매핑된 목록)과 하단(전체 목록) 그리드에 공통적으로 사용되는 데이터 매핑입니다.

| Header | DB Column / Variable | 속성 (Read/Edit) | 설명 |
| :--- | :--- | :--- | :--- |
| 순서 | `seq` | Edit (상단만) | 정렬 순서 (상단 그리드 존재) |
| 국가 | `ctry` | ReadOnly | 국가 코드 |
| 우편번호 | `zipcd` | ReadOnly | 우편번호 (예: 100-725) |
| 일련번호 | `seq` | ReadOnly | 우편번호 일련번호 |
| 우편주소 | `zipaddr` | ReadOnly | 전체 주소 |
| 시도 | `sido` | ReadOnly | 행정구역 (시/도) |
| 시군구 | `sgng` | ReadOnly | 행정구역 (시/군/구) |
| 읍면동 | `eupdiv` | ReadOnly | 행정구역 (읍/면/동) |

## 4. Logic Definition

### 4.1 초기화 로직 (Initialization)
*   **Open Event:** 화면이 열릴 때 로그인한 사용자의 ID를 기반으로 접근 권한이 있는 위탁업체(법인) 정보를 조회하여 화면 상단(법인/법인명)에 Display 합니다.

### 4.2 팝업 호출 로직 (Popup Logic)
*   **국가 선택:** 국가코드 또는 국가명을 입력 후 검색 시, 결과가 1건이면 자동 입력하고, 다건이거나 없으면 `공통.국가선택 팝업`을 호출합니다.
*   **권역 선택:** 위탁업체에 해당하는 권역을 조회하기 위해 `공통.권역선택 팝업`을 호출합니다. 결과가 1건이면 자동 입력합니다.

### 4.3 조회 로직 (Search Logic)
*   **권역별 우편번호 목록 조회 (상단):**
    *   입력된 `권역코드`를 Key로 하여, 해당 권역에 이미 매핑된 우편번호 목록을 조회합니다.
    *   권역 조회 조건은 필수값입니다.
*   **우편번호 목록 조회 (하단):**
    *   `국가코드` 등 하단 검색 조건을 사용하여, 현재 권역별로 매핑되지 않은(Unmapped) 우편번호 목록을 조회합니다.

### 4.4 이동 및 데이터 처리 로직 (Movement & Processing)
*   **위로 이동 (Assign):**
    *   하단 그리드에서 선택된 우편번호들을 상단 그리드로 이동시킵니다.
    *   논리적으로는 해당 우편번호들에 대해 "권역 매핑 정보 생성(Insert)" 상태로 간주합니다.
*   **아래로 이동 (Unassign):**
    *   상단 그리드에서 선택된 우편번호들을 하단 그리드로 이동시킵니다.
    *   논리적으로는 해당 우편번호들에 대해 "권역 매핑 정보 삭제(Delete)" 상태로 간주합니다.
*   **저장 (Save):**
    *   상단 그리드에 최종적으로 구성된 우편번호 목록 정보를 DB에 저장합니다.
    *   이때, 새로 추가된 건은 Insert, 삭제된 건은 Delete 처리가 수행됩니다.
