<div data-controller="zone-grid"
     data-action="ag-grid:ready->zone-grid#registerGrid"
     data-zone-grid-zones-url-value="<%= zones_url %>"
     data-zone-grid-batch-url-value="<%= batch_save_url %>">
  <%= render Ui::SearchFormComponent.new(
    url: create_url,
    fields: search_fields,
    cols: 4,
    enable_collapse: true
  ) %>

  <div class="grid grid-cols-2 gap-3 max-[1200px]:grid-cols-1">
    <section class="min-w-0">
      <div class="flex items-center justify-between gap-3 mb-3 mt-6">
        <h3 class="inline-flex items-center gap-2 text-[15px] font-semibold text-text-primary">
          <%= helpers.lucide_icon("map", css_class: "w-4 h-4 text-text-secondary") %>
          구역(Area) 목록
          <%= render Ui::GridActionsComponent.new(grid_id: "wm-zone-area") %>
        </h3>
      </div>

      <%= render Ui::AgGridComponent.new(
        columns: area_columns,
        url: grid_url,
        page_size: 20,
        row_selection: "single",
        height: "calc(100vh - 420px)",
        grid_id: "wm-zone-area",
        data: { zone_grid_target: "areaGrid" }
      ) %>
    </section>

    <section class="min-w-0">
      <div class="flex items-end justify-between gap-3 mb-3 mt-6">
        <div class="flex items-end gap-2">
          <h3 class="inline-flex items-center gap-2 text-[15px] font-semibold text-text-primary">
            <%= helpers.lucide_icon("boxes", css_class: "w-4 h-4 text-text-secondary") %>
            보관 Zone 관리
            <%= render Ui::GridActionsComponent.new(grid_id: "wm-zone-detail") %>
          </h3>
          <p class="text-text-secondary text-xs" data-zone-grid-target="selectedAreaLabel">구역을 먼저 선택하세요.</p>
        </div>
        <%= render Ui::GridToolbarComponent.new(
          buttons: [
            { label: "행추가", class: "btn btn-sm btn-primary", action: "click->zone-grid#addZoneRow" },
            { label: "행삭제", class: "btn btn-sm btn-danger", action: "click->zone-grid#deleteZoneRows" },
            { label: "저장", class: "btn btn-sm btn-success", action: "click->zone-grid#saveZoneRows" }
          ]
        ) %>
      </div>

      <%= render Ui::AgGridComponent.new(
        columns: zone_columns,
        row_data: [],
        page_size: 20,
        row_selection: "multiple",
        height: "calc(100vh - 420px)",
        grid_id: "wm-zone-detail",
        data: { zone_grid_target: "zoneGrid" }
      ) %>
    </section>
  </div>
</div>
