<div data-controller="std-region-zip-grid"
     data-action="ag-grid:ready->std-region-zip-grid#registerGrid change->std-region-zip-grid#handleConditionChange"
     data-std-region-zip-grid-mapped-url-value="<%= mapped_zipcodes_url %>"
     data-std-region-zip-grid-unmapped-url-value="<%= unmapped_zipcodes_url %>"
     data-std-region-zip-grid-save-url-value="<%= save_mappings_url %>"
     data-std-region-zip-grid-default-corp-code-value="<%= default_corp_code %>"
     data-std-region-zip-grid-default-corp-name-value="<%= default_corp_name %>"
     data-std-region-zip-grid-default-country-code-value="<%= default_country_code %>"
     data-std-region-zip-grid-default-country-name-value="<%= default_country_name %>">
  <section class="mb-2" data-std-region-zip-grid-target="topSearchArea">
    <%= render Ui::SearchFormComponent.new(
      url: create_url,
      fields: top_search_fields,
      cols: 2,
      enable_collapse: false,
      show_buttons: true,
      class: "std-region-zip-search-form"
    ) %>
  </section>

  <section class="min-w-0">
    <%= render Ui::AgGridComponent.new(
      columns: mapped_columns,
      row_data: [],
      page_size: 20,
      row_selection: "multiple",
      height: "max(220px, calc(50vh - 170px))",
      grid_id: "std-region-zip-mapped",
      data: { std_region_zip_grid_target: "mappedGrid" }
    ) %>
  </section>

  <section class="flex justify-center gap-2 py-1.5">
    <button type="button"
            class="btn btn-sm btn-secondary w-7 h-7 p-0 text-xs"
            aria-label="위로 이동"
            data-action="click->std-region-zip-grid#moveUp">
      &#9650;
    </button>
    <button type="button"
            class="btn btn-sm btn-secondary w-7 h-7 p-0 text-xs"
            aria-label="아래로 이동"
            data-action="click->std-region-zip-grid#moveDown">
      &#9660;
    </button>
  </section>

  <section class="mb-2" data-std-region-zip-grid-target="bottomSearchArea">
    <%= render Ui::SearchFormComponent.new(
      url: create_url,
      fields: bottom_search_fields,
      cols: 3,
      enable_collapse: false,
      show_buttons: true,
      class: "std-region-zip-search-form"
    ) %>
  </section>

  <section class="min-w-0">
    <%= render Ui::AgGridComponent.new(
      columns: unmapped_columns,
      row_data: [],
      page_size: 20,
      row_selection: "multiple",
      height: "max(220px, calc(50vh - 210px))",
      grid_id: "std-region-zip-unmapped",
      data: { std_region_zip_grid_target: "unmappedGrid" }
    ) %>
  </section>

  <div class="flex justify-end pt-2">
    <button type="button" class="btn btn-sm btn-success w-16" data-action="click->std-region-zip-grid#save">저장</button>
  </div>
</div>
