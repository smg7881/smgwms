<div class="std-corporation-screen"
     data-controller="std-corporation-grid"
     data-action="ag-grid:ready->std-corporation-grid#registerGrid"
     data-std-corporation-grid-master-batch-url-value="<%= master_batch_save_url %>"
     data-std-corporation-grid-country-batch-url-template-value="<%= country_batch_url_template %>"
     data-std-corporation-grid-country-list-url-template-value="<%= country_list_url_template %>">
  <%= render Ui::SearchFormComponent.new(
    url: create_url,
    fields: search_fields,
    cols: 3,
    enable_collapse: true
  ) %>

  <section class="mb-5">
    <div class="flex items-center justify-between gap-3 mb-3 mt-2">
      <h3 class="inline-flex items-center gap-2 text-[15px] font-semibold text-text-primary">
        <%= helpers.lucide_icon("building-2", css_class: "w-4 h-4 text-text-secondary") %>
        법인 목록
        <%= render Ui::GridActionsComponent.new(grid_id: "std-corporation-master") %>
      </h3>
      <%= render Ui::GridToolbarComponent.new(
        buttons: [
          { label: "추가", class: "btn btn-sm btn-primary", action: "click->std-corporation-grid#addMasterRow" },
          { label: "삭제", class: "btn btn-sm btn-danger", action: "click->std-corporation-grid#deleteMasterRows" },
          { label: "저장", class: "btn btn-sm btn-success", action: "click->std-corporation-grid#saveMasterRows" }
        ]
      ) %>
    </div>

    <%= render Ui::AgGridComponent.new(
      columns: master_columns,
      url: grid_url,
      height: "290px",
      page_size: 20,
      row_selection: "multiple",
      grid_id: "std-corporation-master",
      data: { std_corporation_grid_target: "masterGrid" }
    ) %>
  </section>

  <section>
    <div class="flex items-center justify-between gap-3 mb-3 mt-2">
      <h3 class="inline-flex items-center gap-2 text-[15px] font-semibold text-text-primary">
        <%= helpers.lucide_icon("globe-2", css_class: "w-4 h-4 text-text-secondary") %>
        법인 국가 정보
        <span class="text-sm font-normal text-text-secondary" data-std-corporation-grid-target="selectedCorpLabel">법인을 먼저 선택하세요</span>
        <%= render Ui::GridActionsComponent.new(grid_id: "std-corporation-country") %>
      </h3>
      <%= render Ui::GridToolbarComponent.new(
        buttons: [
          { label: "추가", class: "btn btn-sm btn-primary", action: "click->std-corporation-grid#addCountryRow" },
          { label: "삭제", class: "btn btn-sm btn-danger", action: "click->std-corporation-grid#deleteCountryRows" },
          { label: "저장", class: "btn btn-sm btn-success", action: "click->std-corporation-grid#saveCountryRows" }
        ]
      ) %>
    </div>

    <%= render Ui::AgGridComponent.new(
      columns: country_columns,
      row_data: [],
      height: "320px",
      page_size: 20,
      row_selection: "multiple",
      grid_id: "std-corporation-country",
      data: { std_corporation_grid_target: "countryGrid" }
    ) %>
  </section>
</div>
