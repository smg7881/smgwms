<div class="std-corporation-screen"
     data-controller="std-corporation-grid"
     data-action="ag-grid:ready->std-corporation-grid#registerGrid"
     data-std-corporation-grid-master-batch-url-value="<%= master_batch_save_url %>"
     data-std-corporation-grid-country-batch-url-template-value="<%= country_batch_url_template %>"
     data-std-corporation-grid-country-list-url-template-value="<%= country_list_url_template %>">
  <%= render Ui::SearchFormComponent.new(
    url: create_url,
    fields: search_fields,
    cols: 3,
    enable_collapse: true
  ) %>

  <section class="mb-5">
    <%= render Ui::GridHeaderComponent.new(
      icon: "building-2", title: "법인 목록", grid_id: "std-corporation-master",
      buttons: [
        { label: "추가", class: "btn btn-sm btn-primary", action: "click->std-corporation-grid#addMasterRow" },
        { label: "삭제", class: "btn btn-sm btn-danger", action: "click->std-corporation-grid#deleteMasterRows" },
        { label: "저장", class: "btn btn-sm btn-success", action: "click->std-corporation-grid#saveMasterRows" }
      ]
    ) %>

    <%= render Ui::AgGridComponent.new(
      columns: master_columns,
      url: grid_url,
      height: "290px",
      page_size: 20,
      row_selection: "multiple",
      grid_id: "std-corporation-master",
      data: { std_corporation_grid_target: "masterGrid" }
    ) %>
  </section>

  <section>
    <%= render Ui::GridHeaderComponent.new(
      icon: "globe-2", title: "법인 국가 정보", grid_id: "std-corporation-country",
      buttons: [
        { label: "추가", class: "btn btn-sm btn-primary", action: "click->std-corporation-grid#addCountryRow" },
        { label: "삭제", class: "btn btn-sm btn-danger", action: "click->std-corporation-grid#deleteCountryRows" },
        { label: "저장", class: "btn btn-sm btn-success", action: "click->std-corporation-grid#saveCountryRows" }
      ]
    ) do |header| %>
      <% header.with_inline_subtitle do %>
        <span class="text-sm font-normal text-text-secondary" data-std-corporation-grid-target="selectedCorpLabel">법인을 먼저 선택하세요</span>
      <% end %>
    <% end %>

    <%= render Ui::AgGridComponent.new(
      columns: country_columns,
      row_data: [],
      height: "320px",
      page_size: 20,
      row_selection: "multiple",
      grid_id: "std-corporation-country",
      data: { std_corporation_grid_target: "countryGrid" }
    ) %>
  </section>
</div>
