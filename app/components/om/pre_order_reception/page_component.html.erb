<div data-controller="om-pre-order-reception"
     data-action="ag-grid:ready->om-pre-order-reception#registerGrid ag-grid:selectionChanged->om-pre-order-reception#handleSelectionChanged"
     data-om-pre-order-reception-create-url-value="<%= create_order_url %>"
     data-om-pre-order-reception-items-url-value="<%= items_url %>">
  <%= render Ui::SearchFormComponent.new(
    url: create_url,
    fields: search_fields,
    cols: 4,
    enable_collapse: true
  ) %>

  <section class="mb-5">
    <div class="flex items-center justify-between gap-3 mb-3 mt-2">
      <h3 class="inline-flex items-center gap-2 text-[15px] font-semibold text-text-primary">
        <%= helpers.lucide_icon("clipboard-list", css_class: "w-4 h-4 text-text-secondary") %>
        사전오더접수 목록
        <%= render Ui::GridActionsComponent.new(grid_id: "om-pre-order-reception-master") %>
      </h3>
      <%= render Ui::GridToolbarComponent.new(
        buttons: [
          { label: "오더생성", class: "btn btn-sm btn-primary", action: "click->om-pre-order-reception#createOrders" }
        ]
      ) %>
    </div>

    <%= render Ui::AgGridComponent.new(
      columns: master_columns,
      url: grid_url,
      height: "calc(100vh - 470px)",
      page_size: 20,
      row_selection: "multiple",
      grid_id: "om-pre-order-reception-master",
      data: { om_pre_order_reception_target: "masterGrid" }
    ) %>
  </section>

  <section>
    <div class="flex items-center justify-between gap-3 mb-3 mt-2">
      <h3 class="inline-flex items-center gap-2 text-[15px] font-semibold text-text-primary">
        <%= helpers.lucide_icon("list", css_class: "w-4 h-4 text-text-secondary") %>
        사전오더접수 상세
        <%= render Ui::GridActionsComponent.new(grid_id: "om-pre-order-reception-detail") %>
      </h3>
    </div>

    <%= render Ui::AgGridComponent.new(
      columns: detail_columns,
      row_data: [],
      height: "260px",
      page_size: 20,
      grid_id: "om-pre-order-reception-detail",
      data: { om_pre_order_reception_target: "detailGrid" }
    ) %>
  </section>
</div>
