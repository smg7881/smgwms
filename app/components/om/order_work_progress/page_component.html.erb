  <div data-controller="om-order-work-progress"
       data-action="search-form:success@window->om-order-work-progress#loadData">

    <!-- 검색조건 영역 -->
    <%= render Ui::SearchFormComponent.new(
      url: collection_path(format: :json),
      fields: search_fields,
      cols: 4,
      enable_collapse: true
    ) %>

    <!-- 마스터 정보 영역 -->
    <div class="mb-4 cursor-default">
      <%= render Ui::ResourceFormComponent.new(
        model: nil,
        title: "기본 정보",
        target_controller: "om-order-work-progress",
        fields: [
          # 1 Row
          { field: "cust_ord_no", type: "input", label: "고객오더번호", disabled: true, target: "custOrdNo" },
          { field: "ord_no", type: "input", label: "오더번호", disabled: true, target: "ordNo" },
          { field: "cust_ord_type_nm", type: "input", label: "고객오더유형", disabled: true, target: "custOrdTypeNm" },
          { field: "ord_req_cust_nm", type: "input", label: "오더요청고객", disabled: true, target: "ordReqCustNm" },

          # 2 Row
          { field: "ctrt_no", type: "input", label: "계약번호", disabled: true, target: "ctrtNo" },
          { field: "ctrt_cust_nm", type: "input", label: "계약고객", disabled: true, target: "ctrtCustNm" },
          { field: "bilg_cust_nm", type: "input", label: "청구고객", disabled: true, target: "bilgCustNm" },
          { field: "ord_type_nm", type: "input", label: "오더유형", disabled: true, target: "ordTypeNm" },

          # 3 Row
          { field: "cust_ord_ofcr", type: "input", label: "고객담당자", disabled: true, target: "custOrdOfcr" },
          { field: "cust_tel", type: "input", label: "고객연락처", disabled: true, target: "custTel" },
          { field: "cust_expr_yn", type: "input", label: "고객긴급여부", disabled: true, target: "custExprYn" },
          { field: "cls_expr_yn", type: "input", label: "마감긴급여부", disabled: true, target: "clsExprYn" },

          # 4 Row
          { field: "retrngd_yn", type: "input", label: "반품여부", disabled: true, target: "retrngdYn" },
          { field: "ord_stat_nm", type: "input", label: "오더상태", disabled: true, target: "ordStatNm" },
          { field: "ord_cmpt_nm", type: "input", label: "오더완료", disabled: true, target: "ordCmptNm" }
        ],
        cols: 4,
        show_buttons: false
      ) %>
    </div>

    <!-- 상태 상세 그리드 영역 -->
    <div class="grid grid-cols-1 xl:grid-cols-2 gap-4 h-full min-h-[400px]">

      <!-- 1번 그리드: 오더별 아이템 실적 비교 -->
      <div class="flex flex-col h-full bg-white p-2 rounded shadow-sm border">
        <h3 class="text-sm font-bold text-gray-800 mb-2 pl-2">오더 아이템별 실적</h3>
        <div class="flex-1">
          <%= render Ui::AgGridComponent.new(
            columns: item_columns,
            row_data: [],
            pagination: false,
            data: {
              om_order_work_progress_target: "itemGridContainer",
              action: "ag-grid:ready->om-order-work-progress#registerGrid"
            }
          ) %>
        </div>
      </div>

      <!-- 2번 그리드: 오더작업진행상세 -->
      <div class="flex flex-col h-full bg-white p-2 rounded shadow-sm border">
        <h3 class="text-sm font-bold text-gray-800 mb-2 pl-2">오더작업진행 상세이력</h3>
        <div class="flex-1">
          <%= render Ui::AgGridComponent.new(
            columns: progress_columns,
            row_data: [],
            pagination: false,
            data: {
              om_order_work_progress_target: "progressGridContainer",
              action: "ag-grid:ready->om-order-work-progress#registerGrid"
            }
          ) %>
        </div>
      </div>

    </div>

  </div>
