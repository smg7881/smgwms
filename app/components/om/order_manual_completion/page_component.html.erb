<div data-controller="om-order-manual-completion"
     data-om-order-manual-completion-complete-url-value="<%= complete_path %>"
     data-om-order-manual-completion-details-url-template-value="<%= details_path_template %>">
  <%= render Ui::SearchFormComponent.new(
    url: create_url,
    fields: search_fields,
    cols: 5,
    enable_collapse: true
  ) %>

  <div class="flex items-center justify-between gap-3 mb-3 mt-2">
    <h3 class="inline-flex items-center gap-2 text-[15px] font-semibold text-text-primary">
      <%= helpers.lucide_icon("check-check", css_class: "w-4 h-4 text-text-secondary") %>
      오더수동완료 대상 목록
      <%= render Ui::GridActionsComponent.new(grid_id: "om-order-manual-completion-master") %>
    </h3>
    <div class="flex items-center gap-2">
      <input type="text"
             class="form-input w-72 text-sm"
             placeholder="수동완료 사유 입력"
             data-om-order-manual-completion-target="reasonInput">
      <button type="button"
              class="btn btn-sm btn-success"
              data-action="click->om-order-manual-completion#completeSelectedOrders">
        오더수동완료
      </button>
    </div>
  </div>

  <%= render Ui::AgGridComponent.new(
    columns: master_columns,
    url: grid_url,
    height: "calc(100vh - 430px)",
    page_size: 20,
    row_selection: "multiple",
    grid_id: "om-order-manual-completion-master",
    data: {
      om_order_manual_completion_target: "masterGrid",
      action: "ag-grid:ready->om-order-manual-completion#registerMasterGrid ag-grid:rowClicked->om-order-manual-completion#onMasterRowClicked"
    }
  ) %>

  <div class="flex items-center justify-between gap-3 mb-3 mt-5">
    <h3 class="inline-flex items-center gap-2 text-[15px] font-semibold text-text-primary">
      <%= helpers.lucide_icon("list", css_class: "w-4 h-4 text-text-secondary") %>
      수동완료 대상 상세
    </h3>
  </div>

  <%= render Ui::AgGridComponent.new(
    columns: detail_columns,
    row_data: [],
    height: "290px",
    pagination: false,
    grid_id: "om-order-manual-completion-detail",
    data: {
      om_order_manual_completion_target: "detailGrid",
      action: "ag-grid:ready->om-order-manual-completion#registerDetailGrid"
    }
  ) %>
</div>
