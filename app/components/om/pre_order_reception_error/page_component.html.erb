<div data-controller="om-pre-order-reception-error"
     data-om-pre-order-reception-error-reprocess-url-value="<%= reprocess_url %>"
     data-om-pre-order-reception-error-items-url-value="<%= items_url %>"
     data-om-pre-order-reception-error-download-url-value="<%= download_template_url %>"
     data-om-pre-order-reception-error-upload-url-value="<%= upload_template_url %>">
  <%= render Ui::SearchFormComponent.new(
    url: create_url,
    fields: search_fields,
    cols: 4,
    enable_collapse: true
  ) %>

  <section class="mb-5">
    <%= render Ui::GridHeaderComponent.new(
      icon: "triangle-alert", title: "사전오더접수오류 목록", grid_id: "om-pre-order-reception-error-master",
      buttons: [
        { label: "재처리", class: "btn btn-sm btn-primary", action: "click->om-pre-order-reception-error#reprocess" },
        { label: "양식다운로드", class: "btn btn-sm btn-secondary", action: "click->om-pre-order-reception-error#downloadTemplate" },
        { label: "오류업로드", class: "btn btn-sm btn-secondary", action: "click->om-pre-order-reception-error#openUploadDialog" }
      ]
    ) %>

    <input type="file"
           accept=".csv"
           hidden
           data-om-pre-order-reception-error-target="fileInput"
           data-action="change->om-pre-order-reception-error#uploadFile">

    <%= render Ui::AgGridComponent.new(
      columns: master_columns,
      url: grid_url,
      height: "calc(100vh - 470px)",
      page_size: 20,
      row_selection: "multiple",
      grid_id: "om-pre-order-reception-error-master",
      data: {
        om_pre_order_reception_error_target: "masterGrid",
        action: "ag-grid:ready->om-pre-order-reception-error#registerGrid ag-grid:selectionChanged->om-pre-order-reception-error#handleSelectionChanged"
      }
    ) %>
  </section>

  <section>
    <%= render Ui::GridHeaderComponent.new(
      icon: "list", title: "사전오더접수오류 상세", grid_id: "om-pre-order-reception-error-detail"
    ) %>

    <%= render Ui::AgGridComponent.new(
      columns: detail_columns,
      row_data: [],
      height: "260px",
      page_size: 20,
      grid_id: "om-pre-order-reception-error-detail",
      data: {
        om_pre_order_reception_error_target: "detailGrid",
        action: "ag-grid:ready->om-pre-order-reception-error#registerGrid"
      }
    ) %>
  </section>
</div>
