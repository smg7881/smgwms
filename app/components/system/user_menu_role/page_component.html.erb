<div data-controller="user-menu-role-grid"
     data-action="ag-grid:ready->user-menu-role-grid#registerGrid"
     data-user-menu-role-grid-roles-url-value="<%= roles_by_user_url %>"
     data-user-menu-role-grid-menus-url-value="<%= menus_by_user_role_url %>">
  <%= render Ui::SearchFormComponent.new(
    url: collection_path,
    fields: search_fields,
    cols: 3,
    enable_collapse: true
  ) %>

  <section class="min-w-0 mb-4">
    <%= render Ui::GridHeaderComponent.new(
      icon: "users", title: "사용자 목록", grid_id: "user-menu-role-user",
      class: "mb-2"
    ) %>

    <%= render Ui::AgGridComponent.new(
      columns: user_columns,
      url: users_grid_url,
      pagination: false,
      row_selection: "single",
      height: "calc(100vh - 470px)",
      grid_id: "user-menu-role-user",
      data: { user_menu_role_grid_target: "userGrid" }
    ) %>
  </section>

  <div class="grid grid-cols-2 gap-2 max-[980px]:grid-cols-1">
    <section class="min-w-0">
      <%= render Ui::GridHeaderComponent.new(
        icon: "shield", title: "사용자 역할", grid_id: "user-menu-role-role",
        class: "mb-2"
      ) %>

      <%= render Ui::AgGridComponent.new(
        columns: role_columns,
        row_data: [],
        pagination: false,
        row_selection: "single",
        height: "calc(100vh - 540px)",
        grid_id: "user-menu-role-role",
        data: { user_menu_role_grid_target: "roleGrid" }
      ) %>
    </section>

    <section class="min-w-0">
      <%= render Ui::GridHeaderComponent.new(
        icon: "menu", title: "메뉴 권한", grid_id: "user-menu-role-menu",
        class: "mb-2"
      ) %>

      <%= render Ui::AgGridComponent.new(
        columns: menu_columns,
        row_data: [],
        page_size: 20,
        row_selection: "single",
        height: "calc(100vh - 540px)",
        grid_id: "user-menu-role-menu",
        data: { user_menu_role_grid_target: "menuGrid" }
      ) %>
    </section>
  </div>
</div>
