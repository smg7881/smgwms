<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmgWms</title>
  <link rel="icon" href="/icon.png" type="image/png">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
  <%= stylesheet_link_tag "form_grid", "data-turbo-track": "reload" %>
  <%= stylesheet_link_tag "search_form", "data-turbo-track": "reload" %>
  <%= stylesheet_link_tag "resource_form", "data-turbo-track": "reload" %>
  <%= stylesheet_link_tag "menu_modal", "data-turbo-track": "reload" %>
  <%= javascript_importmap_tags %>
</head>
<body>
  <%# data-controller="tabs" 는 반드시 app-layout 최상위에 (Stimulus 스코프: 탭바/사이드바 모두 접근 가능) %>
  <div class="app-layout" data-controller="tabs">

    <%= render "shared/sidebar" %>

    <main class="main-area">
      <%= render "shared/header" %>

      <turbo-frame id="tab-bar">
        <%= render "shared/tab_bar",
              tabs: session[:open_tabs] || [],
              active: session[:active_tab] || "overview" %>
      </turbo-frame>

      <div class="content-area">
        <%= yield %>
      </div>
    </main>
  </div>
</body>
</html>

