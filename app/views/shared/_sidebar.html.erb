<aside class="sidebar" data-controller="sidebar">
  <div class="sidebar-logo">
    <div class="logo-icon">W</div>
    <span>WMS Pro</span>
  </div>

  <nav class="sidebar-nav">
    <% if dynamic_sidebar_available? %>
      <% grouped = AdmMenu.sidebar_tree %>
      <% (grouped[nil] || []).each do |menu| %>
        <% next unless menu.menu_type == "FOLDER" %>
        <%= render_sidebar_folder_tree(menu, grouped) %>
      <% end %>
    <% else %>
      <button class="nav-item has-children" type="button"
              aria-expanded="false"
              data-action="click->sidebar#toggleTree">
        <%= lucide_icon("folder", css_class: "icon") %> 메인
        <%= lucide_icon("chevron-right", css_class: "chevron") %>
      </button>
      <div class="nav-tree-children">
        <%= sidebar_menu_button "개요", tab_id: "overview", icon: "bar-chart-3", url: "/" %>
      </div>
    <% end %>
  </nav>

  <div class="sidebar-footer">
    <div class="avatar">WM</div>
    <div class="user-info">
      <div class="user-name">관리자</div>
      <div class="user-email"><%= Current.user&.email_address %></div>
    </div>
    <%= button_to session_path, method: :delete, class: "btn btn-sm btn-secondary" do %>
      로그아웃
    <% end %>
  </div>
</aside>
